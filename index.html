<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UPI QR Decoder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="theme-color" content="#0f172a" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- QR Scanner Library -->
  <script src="https://unpkg.com/html5-qrcode"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="data:application/manifest+json,{
    &quot;name&quot;:&quot;UPI QR Decoder&quot;,
    &quot;short_name&quot;:&quot;UPI Decode&quot;,
    &quot;start_url&quot;:&quot;.&quot;,
    &quot;display&quot;:&quot;standalone&quot;,
    &quot;background_color&quot;:&quot;#0f172a&quot;,
    &quot;theme_color&quot;:&quot;#0f172a&quot;,
    &quot;icons&quot;:[{
      &quot;src&quot;:&quot;https://cdn-icons-png.flaticon.com/512/891/891462.png&quot;,
      &quot;sizes&quot;:&quot;192x192&quot;,
      &quot;type&quot;:&quot;image/png&quot;
    }]
  }">
</head>

<body>

<div class="app">

  <!-- Header -->
  <header class="header">
    <div class="header__icon">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="3" height="3"/><line x1="21" y1="14" x2="21" y2="21"/><line x1="14" y1="21" x2="21" y2="21"/>
      </svg>
    </div>
    <h1 class="header__title">UPI QR Decoder</h1>
    <p class="header__subtitle">Scan &middot; Decode &middot; Check Rewards</p>
  </header>

  <!-- Scanner -->
  <section class="scanner-section" id="scannerSection">
    <div class="scanner-label">
      <span class="scanner-label__dot"></span>
      Camera Active
    </div>
    <div class="scanner-wrapper">
      <div id="reader"></div>
    </div>
  </section>

  <!-- Empty State -->
  <div id="emptyState" class="empty-state">
    <div class="empty-state__icon">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 3h6v6"/><path d="M9 21H3v-6"/><path d="M21 3l-7 7"/><path d="M3 21l7-7"/>
      </svg>
    </div>
    <p class="empty-state__text">Point your camera at a UPI QR code<br/>to decode merchant details</p>
  </div>

  <!-- Results -->
  <div id="results" class="results">

    <div id="typeBadge"></div>

    <div class="section-title">Payment Details</div>
    <div id="merchantInfoCards"></div>

    <div class="divider"></div>
    <div class="section-title">Kiwi Rewards Eligibility</div>
    <div id="kiwiRewardsCard" class="kiwi-section"></div>

    <div class="divider"></div>
    <div class="section-title">Raw UPI Data</div>

    <div class="url-card">
      <div class="url-card__header" onclick="toggleUrlExpand()">
        <span class="url-card__label">Full UPI URL</span>
        <span class="url-card__toggle" id="urlToggle">Show &#9662;</span>
      </div>
      <div class="url-card__body" id="urlBody">
        <div class="url-card__url" id="fullUpiUrl"></div>
      </div>
    </div>

    <div class="url-card">
      <div class="url-card__header" onclick="toggleParamsExpand()">
        <span class="url-card__label">All UPI Parameters</span>
        <span class="url-card__toggle" id="paramsToggle">Show &#9662;</span>
      </div>
      <div class="url-card__body" id="paramsBody">
        <table class="params-table" id="paramsTable">
          <thead><tr><th>Param</th><th>Value</th></tr></thead>
          <tbody id="paramsTableBody"></tbody>
        </table>
      </div>
    </div>

    <button class="scan-again-btn visible" onclick="resetScanner()">Scan Another QR Code</button>
  </div>

</div>

<!-- App Entry Point (ES Module) -->
<script type="module" src="js/app.js"></script>

</body>
</html>
